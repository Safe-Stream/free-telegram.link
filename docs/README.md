# üöÄ Free Telegram Proxy - Production Ready

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![MTProxy](https://img.shields.io/badge/MTProxy-v0.02-blue)](https://github.com/TelegramMessenger/MTProxy)

> **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è MTProxy —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º**
> 
> –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è 8-—è–¥–µ—Ä–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫. –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üéØ **3 –ø–æ—Ä—Ç–∞** (8443, 8080, 1080) - –æ–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ ISP
- ‚ö° **4 –≤–æ—Ä–∫–µ—Ä–∞** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è 8-—è–¥–µ—Ä–Ω—ã—Ö CPU
- üîÑ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 03:00
- üåê **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - HTTPS —Å Let's Encrypt
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ localhost:8888
- üê≥ **Docker** - nginx + certbot –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - MTProxy –ø–æ–¥ –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegram-proxy/
‚îú‚îÄ‚îÄ install.sh              # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ update.sh               # –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ docker-compose.yml      # Nginx + Certbot
‚îú‚îÄ‚îÄ scripts/                # –£—Ç–∏–ª–∏—Ç—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ update-config.sh    # –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤ Telegram
‚îú‚îÄ‚îÄ systemd/                # Systemd —Å–µ—Ä–≤–∏—Å—ã –∏ —Ç–∞–π–º–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ mtproxy.service.template
‚îÇ   ‚îú‚îÄ‚îÄ mtproxy-update-config.service
‚îÇ   ‚îî‚îÄ‚îÄ mtproxy-update-config.timer
‚îú‚îÄ‚îÄ nginx/                  # –í–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf
‚îÇ   ‚îî‚îÄ‚îÄ html/
‚îÇ       ‚îú‚îÄ‚îÄ index.html
‚îÇ       ‚îî‚îÄ‚îÄ config.js.template
‚îú‚îÄ‚îÄ monitoring/             # Prometheus + Grafana (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Ubuntu 24.04 LTS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- 8 vCPU, 16GB RAM
- –î–æ–º–µ–Ω —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π DNS –∑–∞–ø–∏—Å—å—é
- –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã: 80, 443, 8443, 8080, 1080

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (5 –º–∏–Ω—É—Ç)

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/safe-stream/free-telegram.link.git /opt/free-telegram.link
cd /opt/free-telegram.link

# 2. –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
chmod +x install.sh
sudo ./install.sh

# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Docker, build tools)
# ‚úÖ –°–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç MTProxy –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ
# ‚úÖ –°–æ–∑–¥–∞—Å—Ç systemd —Å–µ—Ä–≤–∏—Å—ã
# ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
# ‚úÖ –ü–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
# ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```

### –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–æ–≤ –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ

```bash
# UFW (Ubuntu)
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 8443/tcp
sudo ufw allow 8080/tcp
sudo ufw allow 1080/tcp

# –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Hetzner, DigitalOcean, etc)
```

## üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl status mtproxy
systemctl status mtproxy-update-config.timer

# –õ–æ–≥–∏
journalctl -u mtproxy -f

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (live metrics)
curl http://localhost:8888/stats

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart mtproxy

# –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
/opt/free-telegram.link/scripts/update-config.sh
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: https://your-domain.com
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ MTProxy**: `curl localhost:8888/stats`
- **–õ–æ–≥–∏**: `journalctl -u mtproxy -n 100`

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–æ—Ä—Ç—ã MTProxy

| –ü–æ—Ä—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|-----------|-----------|
| 8443 | –û—Å–Ω–æ–≤–Ω–æ–π | –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å–∞–º–∏ |
| 8080 | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π | HTTP proxy —Å—Ç–∞–Ω–¥–∞—Ä—Ç |
| 1080 | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π | SOCKS proxy —Å—Ç–∞–Ω–¥–∞—Ä—Ç |
| 8888 | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –¢–æ–ª—å–∫–æ localhost |

### –í–æ—Ä–∫–µ—Ä—ã

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ = CPU cores / 2
- 8 —è–¥–µ—Ä = 4 –≤–æ—Ä–∫–µ—Ä–∞ ‚úÖ
- 16 —è–¥–µ—Ä = 8 –≤–æ—Ä–∫–µ—Ä–æ–≤

–ò–∑–º–µ–Ω–∏—Ç—å –≤ `/etc/systemd/system/mtproxy.service`:
```bash
ExecStart=... -M 4  # –ò–∑–º–µ–Ω–∏—Ç—å —á–∏—Å–ª–æ
systemctl daemon-reload
systemctl restart mtproxy
```

### –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤

Telegram –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç IP –∞–¥—Ä–µ—Å–∞ –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–æ–≤. Systemd timer –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç —Å–≤–µ–∂–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏ **–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 03:00** –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–∏—Å–∞.

–ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è:
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å /etc/systemd/system/mtproxy-update-config.timer
OnCalendar=05:00  # –ù–∞–ø—Ä–∏–º–µ—Ä, 05:00

systemctl daemon-reload
systemctl restart mtproxy-update-config.timer
```

## üåê –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### DNS Load Balancing (10K+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

1. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS Round-Robin:

```
A    @    87.120.93.81      TTL 300
A    @    87.120.93.82      TTL 300
A    @    87.120.93.83      TTL 300
```

Telegram –∫–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü–æ–ª—É—á–∏—Ç –≤—Å–µ IP –∞–¥—Ä–µ—Å–∞
- –ü–æ–ø—Ä–æ–±—É–µ—Ç –∫–∞–∂–¥—ã–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Ä–∞–±–æ—á–∏–π –ø—Ä–∏ —Å–±–æ–µ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
curl localhost:8888/stats | jq

# CPU/RAM
htop

# –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
iftop
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ MTProxy —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º `mtproxy` (–Ω–µ root)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ —Å localhost
- ‚úÖ –°–µ–∫—Ä–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º
- ‚úÖ HTTPS —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –°–º–µ–Ω–∞ —Å–µ–∫—Ä–µ—Ç–∞

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞
NEW_SECRET=$(head -c 16 /dev/urandom | xxd -ps)

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ .env
echo "MTPROXY_SECRET=$NEW_SECRET" > /opt/free-telegram.link/.env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart mtproxy

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
cd /opt/free-telegram.link
sudo ./update.sh
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [QUICKSTART.md](docs/QUICKSTART.md) - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [DEPLOY.md](docs/DEPLOY.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- [MONITORING.md](docs/MONITORING.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- [TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md) - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üêõ **Issues**: [GitHub Issues](https://github.com/safe-stream/free-telegram.link/issues)
- üí¨ **Telegram**: [@Safe_Stream_bot](https://t.me/Safe_Stream_bot)

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ

---

**Made with ‚ù§Ô∏è by Safe Stream Team**
