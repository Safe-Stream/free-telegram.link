#!/bin/bash

# ????????? ??????? SECRET
if [ -z "$SECRET" ]; then
    echo "ERROR: SECRET environment variable is not set!"
    echo "Generate one with: head -c 16 /dev/urandom | xxd -ps"
    exit 1
fi

# ???????????
echo "Starting MTG (MTProto Go Proxy)..."
echo "Secret: $SECRET"
echo "Port: ${PORT:-443}"

# ????????? MTG
# MTG ????????????? ????????? ??????? Telegram
exec mtg run $SECRET -b 0.0.0.0:${PORT:-443} --prefer-ip=ipv4